{% extends "base.html.twig" %}

{% block title %} Casu'Hall - Mon compte {% endblock %}

{% block body %}
     {% set alertTypes = {'success': 'success', 'warning': 'warning', 'error': 'danger'} %}
    {% for type, cssClass in alertTypes %}
        {% for message in app.flashes(type) %}
            <div class="container-fluid d-flex align-items-center text-center justify-content-center mb-2 mt-3">
                <div class="alert alert-dismissible alert-{{ cssClass }} text-center" data-alert>
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    {{ message }}
                </div>
            </div>
        {% endfor %}
    {% endfor %}
    
    <div class="text-center"> 
        <h4 class = "p-2 mt-3 text-uppercase fw-bold"> Mes Informations personnelles </h4>
    </div>
    {{ form_start(form)}}
        {{ form_widget(form.action) }}
        <div class="container border rounded mt-4 shadow shadow-lg">
            <div class="d-flex align-items-center">
                <h5 class="p-2 mt-3 text-uppercase fw-bold">Informations générales</h5>
                <img src="/assets/images/identite.png" class="ms-3 mt-2" alt="identite"> 
            </div>
            <div class="row mb-2">
                <div class="col-md-6">
                    <label for="prenomUtilisateur"> Civilité </label>
                </div>
                <div class="col-md-4">
                    {% set genre = user.civilite ? "Monsieur" : "Madame" %}

                    <input type="text" class="w-100 p-1" value="{{ genre }} " readonly>
                </div>
                <div class="col-md-6 mt-2">
                    <label for="prenomUtilisateur"> Nom - Prénom </label>
                </div>
                <div class="col-md-4 mt-2">
                    <input type="text" class="w-100 p-1" value="{{ user.nomUtilisateur }} {{ user.prenomUtilisateur }} " readonly>
                </div>

                <div class="col-md-6 mt-2">
                    <label for="dateNaissance"> Date de naissance </label>
                </div>
                <div class="col-md-4 mt-2 mb-3 position-relative">
                    <input type="date" class="w-100 p-1 pe-5" value="{{ user.dateNaissance|date('Y-m-d') }}" readonly>
                    <img src="/assets/images/calendrier.png" alt="calendrier" class="position-absolute top-50 end-0 translate-middle-y me-3 icon-calendar">
                </div>
            </div>
        </div>
        <div class="container border rounded mt-4 shadow shadow-lg">
            <div class="d-flex align-items-center">
                <h5 class = "p-2 mt-3 text-uppercase fw-bold"> Coordonnées </h5>
                <img src="/assets/images/coordonnees.png" class="ms-3" alt="coordonnees">
            </div>
            <div class="row mb-2">
                <div class="col-md-6">
                    <label for="adresse"> Adresse e-mail </label>
                </div>
                <div class="col-md-4 mb-2">
                    <input type="email" class="w-100 p-1" value="{{ user.email }}" readonly>
                </div>

                <div class="col-md-6">
                    {{ form_label(form.telephone) }}
                </div>
                <div class="col-md-4 mb-2">
                    {{ form_widget(form.telephone, {'attr': {'value': user.telephone is not null ? user.telephone : '+33' }}) }}
                    {{ form_errors(form.telephone) }}
                </div>

                <div class="d-flex justify-content-center mt-4 mb-3">
                    {{ form_widget(form.modifyInformations) }}
                </div>
            </div>
        </div>

        <div class="container border rounded mt-4 mb-4 shadow shadow-lg">
            <div class="d-flex align-items-center">
                <h5 class="p-2 mt-3 text-uppercase fw-bold"> Changer le mot de passe </h5>
                <img src="/assets/images/password.png" class="ms-3" alt="password">
            </div>
            <div class="row mb-2 mt-4">
                <div class="col-md-6">
                    {{ form_label(form.plainPassword.first) }}
                </div>
                <div class="col-md-4 mb-2">
                    {{ form_widget(form.plainPassword.first) }}
                </div>
                <div class="col-md-6">
                    {{ form_label(form.plainPassword.second) }}
                </div>
                <div class="col-md-4">
                    {{ form_widget(form.plainPassword.second) }}
                </div>
            </div>

            <small class="mb-4 fs-8 fst-italic">
                Pour rappel, votre mot de passe doit contenir au moins <b>8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial</b>.
            </small>

            <div class="col-md-4 form-check mt-3 mb-4">
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" onClick="afficherMotDePasse('compte_plainPassword_first','compte_plainPassword_second')">
                <label class="form-check-label" for="flexCheckDefault"> Visualiser les mots de passe </label>
            </div>
            
            <div class="d-flex justify-content-center mt-4 mb-3">
                {{ form_widget(form.submit) }}
            </div>
        </div>
    {{ form_end(form) }}

    <div class="container border rounded mt-4 mb-4 shadow shadow-lg">
        <h5 class = "p-2 mt-3 text-uppercase fw-bold"> Mes commandes </h5>
        {# {% if panier|length > 0 %}
            <!-- à remplir pour les commandes effectuées sur ce compte et cet utilisateur -->
        {% else %} #}
            <p> Aucunes commandes passées chez nous pour le moment. </p>
        {# {% endif %} #} 
    </div>
{% endblock %}
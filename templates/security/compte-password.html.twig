{% extends "base/base.html.twig" %}

{% block title %} Casu'Hall - Mes informations personnelles {% endblock %}

{% block body %}
    <nav aria-label="breadcrumb" style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34;);" class="mt-3 ms-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ path('home.index')}}" class="text-black">Accueil</a></li>
            <li class="breadcrumb-item"><a href="{{  path('edition.compte', {'id': app.user.id}) }}" class="text-black"> Mon espace personnel </a></li>
            <li class="breadcrumb-item active" aria-current="page"> Modifier le mot de passe </li>
        </ol>
    </nav>

    {% set alertTypes = {'success': 'success', 'warning': 'warning', 'error': 'danger'} %}
    {% for type, cssClass in alertTypes %}
        {% for message in app.flashes(type) %}
            <div class="container-fluid d-flex align-items-center text-center justify-content-center mb-2 mt-3">
                <div class="alert alert-dismissible alert-{{ cssClass }} text-center" data-alert>
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    {{ message }}
                </div>
            </div>
        {% endfor %}
    {% endfor %}

    <div class="container d-flex flex-column border rounded mt-2 mb-5 shadow shadow-lg p-4 w-50">
        <h4 class ="p-2 mt-2 text-uppercase fw-bold text-center"> Modifier le mot de passe </h4>
        <hr class="w-25 mx-auto">
        {{ form_start(form) }}
            <div class="row mb-2 mt-4">
                <div class="col-md-6">
                    {{ form_label(form.plainPassword.first) }}
                </div>
                <div class="col-md-4 mb-2">
                    {{ form_widget(form.plainPassword.first) }}
                </div>
                <div class="col-md-6">
                    {{ form_label(form.plainPassword.second) }}
                </div>
                <div class="col-md-4">
                    {{ form_widget(form.plainPassword.second) }}
                </div>
            </div>
            <div class="col-md-4 form-check mt-1 mb-4">
                <input class="form-check-input" type="checkbox" onClick="afficherMotDePasse('change_password_form_plainPassword_first','change_password_form_plainPassword_second')">
                <label class="form-check-label"> Visualiser les mots de passe </label>
            </div>
            <div class="alert alert-warning d-flex align-items-center p-2 mt-2">
                <div class="fst-italic small d-flex">
                    <p class="mb-0">Pour rappel, votre mot de passe doit contenir au moins</p>
                    <p class="fw-bold mb-0 ms-1">8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial.</p>
                </div>
            </div>

            <div class="d-flex justify-content-center mt-4 mb-3">
                {{ form_widget(form.submit) }}
            </div>
        {{ form_end(form) }}
    </div>
{% endblock %}